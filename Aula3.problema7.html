<!DOCTYPE html>
<html> 
    
    <head>
        <meta charset = "UTF-8">
        <title> Lógica de Programação com JavaScript</title>
    </head>

    <body> 
        <h1>Adicionar Crud</h1>

        <input type="text" placeholder="digite uma fruta" id="nome_fruta">
        <input type="text" placeholder="digite a origem da fruta" id="origem_fruta">
        <button onclick="adicionar()">Adicionar</button>
        <button onclick="contar()">Contar Frutas</button>
        <p id="info"></p>
        <ul id="lista_frutas"></ul>


    <script>
        var frutas = [];  
        function adicionar() {
            var nome = document.getElementById("nome_fruta").value; 
            var origem = document.getElementById("origem_fruta").value;
            if (!nome || !origem) return alert("Preencha todos os campos!");


            var fruta = { nome, origem };
            frutas.push(fruta);
            document.getElementById("nome_fruta").value = "";
            document.getElementById("origem_fruta").value = "";
            document.getElementById("info").innerHTML = "A fruta " + nome + " foi adicionada";
        }

        function contar() {
            var lista = document.getElementById("lista_frutas");
            lista.innerHTML=""; //limpa a lista antes de recriar
            
            // este link explica como usar o INDEX do forEach
            // https://www.freecodecamp.org/portuguese/news/foreach-em-javascript-como-percorrer-um-array-em-js/

            frutas.forEach(function (fruta, index) {
                // para cada fruta, eu vou criar um item que vai para a lista
                var item = document.createElement("li");
                // cada item da lista recebe o nome da fruta e o lugar de origem
                item.textContent = fruta.nome + " (origem: " + fruta.origem + ")";
                // coloco cada item da lista como um ponteiro a ser selecionado
                item.style.cursor = "pointer";
                //para cada item, existirá uma possibilidade de onclick
                item.onclick = function() {
                // coleto o indice daquela fruta/elemento especifico
                indiceSelecionado = index;
                document.getElementById("info").innerHTML = 
                    "Fruta selecionada: <b>" + fruta.nome + "</b> ("+ fruta.origem +")";
            };

                // coloco todas as informações na lista
                lista.append(item); 
            
            });

            document.getElementById("info").innerHTML = 
                "O total de frutas na lista é: " + frutas.length;

        }
            

        </script>
    </body>

</html>